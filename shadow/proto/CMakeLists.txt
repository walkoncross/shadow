if (Protobuf_FOUND)
  file(GLOB proto_files "*.proto")
  GenProtobuf(proto_srcs proto_hdrs ${proto_files})
  add_library(proto STATIC ${proto_srcs} ${proto_hdrs})
  if (MSVC)
    set_target_properties(proto PROPERTIES DEBUG_POSTFIX "d")
  endif ()
  install(TARGETS proto DESTINATION ${Shadow_INSTALL_LIB_PREFIX})

  set(Shadow_PROTO_LIB proto PARENT_SCOPE)
endif ()
